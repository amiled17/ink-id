Bootstrap: localimage 
From: tf-gpu-1.13.1.sif

%post
  apt-get update
  DEBIAN_FRONTEND=noninteractive apt-get --fix-missing install -y git-all
  . /usr/local/tensorflow/bin/activate
  pip install --upgrade Cython
  git clone https://<username>:<password>@code.cs.uky.edu/seales-research/ink-id.git
  pip install -e ./ink-id/.

%runscript
  if [ $# -lt 1 ]; then
      echo "Usage: ./container RUN COMMAND"
      exit 1
  fi
  
  . /usr/local/tensorflow/bin/activate
  exec "$@"  

%labels
  Maintainer Mami Hayashida <mami.hayashida@uky.edu>
  Version v.0.1

%help
  This container, bootstrapped to lcc:tf-gpu-py3 container, is for inkid project. 

  Run scripts as shown below: 
  	singularity run --nv inkid-gpu.sif inkid-train-and-predict <args>
  	singilarity run --nv inkid-gpu.sif python <python_script>.py <args>
  
